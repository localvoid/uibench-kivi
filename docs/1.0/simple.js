(function(){'use strict';var r;function t(a,b,e){120!==b.charCodeAt(0)?a.setAttribute(b,e):109===b.charCodeAt(1)&&108===b.charCodeAt(2)?a.setAttributeNS("http://www.w3.org/XML/1998/namespace",b,e):108===b.charCodeAt(1)&&105===b.charCodeAt(2)?a.setAttributeNS("http://www.w3.org/1999/xlink",b,e):a.setAttribute(b,e)}function u(a,b,e){this.b=a;this.g=b;this.i=null;this.c=e;this.j=this.a=this.f=this.s=this.v=this.l=null}r=u.prototype;r.key=function(a){this.i=a;return this};r.props=function(a){this.c=a;return this};
r.data=function(a){this.c=a;return this};r.style=function(a){this.v=a;return this};r.className=function(a){this.s=a;return this};r.children=function(a){this.f=a;return this};function v(a,b){a.b|=16;a.f=b;return a}r.value=function(a){this.b|=64;this.f=a;return this};r.checked=function(a){this.b|=128;this.f=a;return this};function w(a){if(0===(a.b&4)){if(a=a.f,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)w(a[b])}else x(a.j)}
function y(a){if(0===(a.b&4)){if(a=a.f,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)y(a[b])}else a.j.detach()}function z(a){if(0===(a.b&256))if(0!==(a.b&4)){a=a.j;a.h|=1;null!==a.m&&0===(a.h&65536)&&z(a.m);0!==(a.h&2)&&B(a);var b=a.o.J;null!==b&&b(a,a.props,a.state)}else{if(null!==a.f&&(a=a.f,"string"!==typeof a))for(b=0;b<a.length;b++)z(a[b])}else y(a)}
function C(a,b){var e=a.b;0!==(e&1)?a.a=document.createTextNode(a.c):0!==(e&2)?a.a=0===(e&131072)?0===(e&32768)?document.createElement(a.g):document.createElementNS("http://www.w3.org/2000/svg",a.g):a.g.createElement():0===(e&256)&&(b=D(a.g,b,a.c),a.a=b.element,a.j=b)}
function F(a,b){var e,c,d,l,f=a.b,k;if(0!==(f&10)){k=a.a;if(0===(f&262144)){var h=a.c;if(null!==h)for(l=Object.keys(h),e=0,c=l.length;e<c;e++)d=l[e],k[d]=h[d];if(null!==a.l)for(l=Object.keys(a.l),e=0,c=l.length;e<c;e++)d=l[e],t(k,d,a.l[d]);null!==a.v&&(0===(f&32768)?k.style.cssText=a.v:k.setAttribute("style",a.v));null!==a.s&&(0===(f&32768)?k.className=a.s:k.setAttribute("class",a.s))}else 0===(f&8)?a.g.w(k,void 0,a.c):b.o.g.w(k,void 0,a.c);d=a.f;if(null!==d)if(0===(a.b&2048))if(0===(a.b&192))if("string"===
typeof d)k.textContent=d;else for(e=0,c=d.length;e<c;e++)G(a,d[e],null,b);else 0!==(a.b&64)?a.a.value=a.f:a.a.checked=a.f;else k.innerHTML=d}else 0!==(f&4)&&H(a.j)}function G(a,b,e,c){a=a.a;null===b.a?(C(b,c),0!==(b.b&4)&&x(b.j),F(b,c),a.insertBefore(b.a,e)):(a.insertBefore(b.a,e),w(b),H(b.j,0===(b.b&512)?b.c:null))}function I(a,b,e,c){a=a.a;null===b.a?(C(b,c),0!==(b.b&4)&&x(b.j),F(b,c),a.replaceChild(b.a,e.a)):(a.replaceChild(b.a,e.a),w(b),H(b.j,0===(b.b&512)?b.c:null));z(e)}
function J(a,b){a.a.textContent="";for(a=0;a<b.length;a++)z(b[a])}
function K(a,b,e){var c=a.a,d=a.b,l;b.a=a.a;if(0!==(d&1))a.c!==b.c&&(a.a.nodeValue=b.c);else if(0!==(d&10)){if(0===(d&262144)){if(a.c!==b.c){l=a.c;var f=b.c,k=Object.keys(l),h,m;for(m=0;m<k.length;m++){h=k[m];var g=f[h];l[h]!==g&&(c[h]=g)}}if(a.l!==b.l)if(0===(a.b&32))for(l=a.l,f=b.l,k=Object.keys(l),m=0;m<k.length;m++)h=k[m],g=f[h],l[h]!==g&&t(c,h,g);else if(l=a.l,f=b.l,null!==l)if(null===f)for(h=Object.keys(l),k=0;k<h.length;k++)c.removeAttribute(h[k]);else{h=Object.keys(l);for(k=0;k<h.length;k++)m=
h[k],f.hasOwnProperty(m)?(g=f[m],l[m]!==g&&t(c,m,g)):c.removeAttribute(m);h=Object.keys(f);for(k=0;k<h.length;k++)m=h[k],l.hasOwnProperty(m)||t(c,m,f[m])}else if(null!==f)for(h=Object.keys(f),k=0;k<h.length;k++)m=h[k],t(c,m,f[m]);a.v!==b.v&&(l=null===b.v?"":b.v,0===(d&32768)?c.style.cssText=l:c.setAttribute("style",l));a.s!==b.s&&(l=null===b.s?"":b.s,0===(d&32768)?c.className=l:c.setAttribute("class",l))}else a.c!==b.c&&(0===(d&8)?a.g.w(c,a.c,b.c):e.o.g.w(c,a.c,b.c));if(0===(a.b&192)){if(a.f!==b.f)if(0===
(a.b&2048))if(d=a.f,b=b.f,c=0,"string"===typeof d)if(null===b)a.a.removeChild(a.a.firstChild);else if("string"===typeof b)(e=a.a.firstChild)?e.nodeValue=b:a.a.textContent=b;else for(a.a.removeChild(a.a.firstChild);c<b.length;)G(a,b[c++],null,e);else if("string"===typeof b){if(null!==d)for(;c<d.length;)z(d[c++]);a.a.textContent=b}else if(null!==d&&0!==d.length)if(null===b||0===b.length)J(a,d);else if(1===d.length&&1===b.length)d=d[0],b=b[0],L(d,b)?K(d,b,e):I(a,b,d,e);else if(0===(a.b&16)){c=f=0;k=
d.length-1;for(l=b.length-1;f<=k&&c<=l;){h=d[f];m=b[c];if(!L(h,m))break;f++;c++;K(h,m,e)}for(;f<=k&&c<=l;){h=d[k];m=b[l];if(!L(h,m))break;k--;l--;K(h,m,e)}for(;f<=k&&c<=l;)h=d[f++],m=b[c++],L(h,m)?K(h,m,e):I(a,m,h,e);if(f<=k){do e=d[f++],a.a.removeChild(e.a),z(e);while(f<=k)}else if(c<=l){d=l+1;d=d<b.length?b[d].a:null;do G(a,b[c++],d,e);while(c<=l)}}else{c=k=0;h=d.length-1;m=b.length-1;f=d[k];l=b[c];var g=d[h],n=b[m],p,E;a:for(;;){for(;f.i===l.i;){K(f,l,e);k++;c++;if(k>h||c>m)break a;f=d[k];l=b[c]}for(;g.i===
n.i;){K(g,n,e);h--;m--;if(k>h||c>m)break a;g=d[h];n=b[m]}if(g.i===l.i){K(g,l,e);a.a.insertBefore(l.a,f.a);h--;c++;if(k>h||c>m)break;g=d[h];l=b[c]}else if(f.i===n.i){K(f,n,e);f=m+1;f=f<b.length?b[f].a:null;a.a.insertBefore(n.a,f);k++;m--;if(k>h||c>m)break;f=d[k];n=b[m]}else break}if(k>h)for(f=m+1,f=f<b.length?b[f].a:null;c<=m;)G(a,b[c++],f,e);else if(c>m)for(;k<=h;)e=d[k++],a.a.removeChild(e.a),z(e);else{var M=h-k+1,f=m-c+1;l=Array(f);for(g=0;g<f;g++)l[g]=-1;var N=!1,q=0,A=0;if(4>=f||16>=M*f)for(g=
k;g<=h;g++){if(p=d[g],A<f)for(n=c;n<=m;n++)if(E=b[n],p.i===E.i){l[n-c]=g;q>n?N=!0:q=n;K(p,E,e);A++;d[g]=null;break}}else{for(var V=new Map,g=c;g<=m;g++)p=b[g],V.set(p.i,g);for(g=k;g<=h;g++)p=d[g],A<f&&(n=V.get(p.i),void 0!==n&&(E=b[n],l[n-c]=g,q>n?N=!0:q=n,K(p,E,e),A++,d[g]=null))}if(M===d.length&&0===A)for(J(a,d);c<f;)G(a,b[c++],null,e);else{for(g=M-A;0<g;)p=d[k++],null!==p&&(h=p,a.a.removeChild(h.a),z(h),g--);if(N){k=l.slice(0);d=[];d.push(0);h=0;for(m=l.length;h<m;h++)if(-1!==l[h])if(g=d[d.length-
1],l[g]<l[h])k[h]=g,d.push(h);else{g=0;for(n=d.length-1;g<n;)p=(g+n)/2|0,l[d[p]]<l[h]?g=p+1:n=p;l[h]<l[d[g]]&&(0<g&&(k[h]=d[g-1]),d[g]=h)}g=d.length;for(n=d[g-1];0<g--;)d[g]=n,n=k[n];n=d.length-1;for(g=f-1;0<=g;g--)-1===l[g]?(q=g+c,p=b[q],f=q+1,f=f<b.length?b[f].a:null,G(a,p,f,e)):0>n||g!==d[n]?(q=g+c,p=b[q],f=q+1,f=f<b.length?b[f].a:null,a.a.insertBefore(p.a,f)):n--}else if(A!==f)for(g=f-1;0<=g;g--)-1===l[g]&&(q=g+c,p=b[q],f=q+1,f=f<b.length?b[f].a:null,G(a,p,f,e))}}}else{if(null!==b)for(c=0;c<b.length;c++)G(a,
b[c],null,e)}else c.innerHTML=b.f}else 0!==(d&64)?c.value!==b.f&&(c.value=b.f):c.checked!==b.f&&(c.checked=b.f)}else e=b.j=a.j,0!==(d&1024)&&a.c===b.c||H(e,0===(d&512)?b.c:void 0)}function L(a,b){return a.b===b.b&&a.g===b.g&&a.i===b.i}function O(){this.u=4;this.B=8;this.b=0;this.g="div";this.J=this.I=this.F=this.A=this.w=this.K=null}O.prototype.tagName=function(a){this.g=a;"string"!==typeof a&&(this.u|=a.u,this.B|=a.u,this.b|=a.u);return this};
O.prototype.canvas=function(){this.u|=65536;this.b|=65536;this.g="canvas";return this};O.prototype.init=function(a){this.A=a;return this};O.prototype.update=function(a){this.w=a;return this};function P(a,b){return new u(1028,a,void 0===b?null:b)}function D(a,b,e){var c;c=0===(a.b&131072)?0===(a.b&32768)?document.createElement(a.g):document.createElementNS("http://www.w3.org/2000/svg",a.g):a.g.createElement();b=new Q(a.u,a,c,b,e);0!==(a.b&1)&&(c.M=b);null!==a.A&&a.A(b,b.props);return b}
function Q(a,b,e,c,d){this.h=a;this.L=0;this.o=b;this.element=e;this.depth=void 0===c?0:c.depth+1;this.props=void 0===d?null:d;this.state=null;this.m=0===(a&65536)?null:e.getContext("2d");this.D=this.C=null}function R(a){return new u(a.o.B,a.o.g,null)}Q.prototype.update=function(a){H(this,a)};function S(a,b){null===a.m?(b.j=a,b.a=a.element,F(b,a)):K(a.m,b,a);a.m=b}function x(a){T(a);null!==a.m&&0===(a.h&65536)&&w(a.m)}Q.prototype.detach=function(){null!==this.m&&0===(this.h&65536)&&y(this.m);B(this)};
Q.prototype.subscribe=function(a){return a.N(this)};function H(a,b){if(void 0!==b&&0===(a.h&512)){var e=a.props,c=a.o.K;null!==c?c(a,e,b):0===(a.h&4)&&(a.h|=4,U(a));a.props=b}6===(a.h&6)&&(a.o.w(a,a.props,a.state),a.L=W,a.h&=-133)}function T(a){a.h|=2;var b=a.o.F;null!==b&&b(a,a.props,a.state)}function B(a){a.h&=-19;for(var b=a.C;null!==b;)b.G(),b=b.H;a.C=null;U(a);b=a.o.I;null!==b&&b(a,a.props,a.state)}function U(a){for(var b=a.D;null!==b;)b.G(),b=b.H;a.D=null}
function aa(){var a=document.querySelector("#App"),b=D(ba,void 0,null);a.appendChild(b.element);T(b);H(b);return b}var W=0,X=[],Y=[],ca=document.createTextNode(""),da="__kivi"+Math.random();(new MutationObserver(ea)).observe(ca,{characterData:!0});window.addEventListener("message",fa);function fa(a){if(a.source===window&&a.data===da){a=Y;Y=[];for(var b=0;b<a.length;b++)a[b]();W++}}function ea(){for(;0<X.length;){var a=X;X=[];for(var b=0;b<a.length;b++)a[b]();W++}}
var Z=(new O).tagName("td").init(function(a,b){a.element.addEventListener("click",function(a){console.log("Click",b);a.stopPropagation()})}).update(function(a,b){S(a,R(a).className("TableCell").children(b))}),ga=(new O).tagName("tr").update(function(a,b){for(var e=b.props,c="#"+b.id,c=[new u(4,Z,void 0===c?null:c)],d=0;d<e.length;d++)c.push(P(Z,e[d]));e=R(a);e.l={"data-id":b.id};S(a,e.className(b.active?"TableRow active":"TableRow").children(c))}),ha=(new O).tagName("table").update(function(a,b){S(a,
R(a).className("Table").children([v(new u(2,"tbody",null),b.items.map(function(a){return P(ga,a).key(a.id)}))]))}),ia=(new O).update(function(a,b){var e=b.time,c=R(a).className("AnimBox");c.l={"data-id":""+b.id};S(a,c.style("border-radius:"+e%10+"px;background:rgba(0,0,0,"+(.5+e%10/10)+")"))}),ja=(new O).update(function(a,b){S(a,v(R(a).className("Anim"),b.items.map(function(a){return P(ia,a).key(a.id)})))}),ka=(new O).tagName("li").update(function(a,b){S(a,R(a).className("TreeLeaf").children(""+b.id))}),
la=(new O).tagName("ul").update(function(a,b){S(a,v(R(a).className("TreeNode"),b.children.map(function(a){return a.container?P(la,a).key(a.id):P(ka,a).key(a.id)})))}),ma=(new O).update(function(a,b){S(a,R(a).className("Tree").children([P(la,b.root)]))}),ba=(new O).update(function(a,b){var e=b&&b.location,c=null;"table"===e?c=[P(ha,b.table)]:"anim"===e?c=[P(ja,b.anim)]:"tree"===e&&(c=[P(ma,b.tree)]);S(a,R(a).className("Main").children(c))});uibench.init("kivi[simple]","1.0.0");
document.addEventListener("DOMContentLoaded",function(){var a=aa();uibench.run(function(b){a.update(b)},function(b){document.body.innerHTML="<pre>"+JSON.stringify(b,null," ")+"</pre>";a=null})});}).call();
