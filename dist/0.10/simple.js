(function(){'use strict';var q;function r(a,b,d){120!==b.charCodeAt(0)?a.setAttribute(b,d):109===b.charCodeAt(1)&&108===b.charCodeAt(2)?a.setAttributeNS("http://www.w3.org/XML/1998/namespace",b,d):108===b.charCodeAt(1)&&105===b.charCodeAt(2)?a.setAttributeNS("http://www.w3.org/1999/xlink",b,d):a.setAttribute(b,d)}function t(a,b,d){this.a=a;this.i=b;this.h=null;this.f=d;this.m=this.b=this.g=this.j=this.u=this.o=null}q=t.prototype;q.key=function(a){this.h=a;return this};q.props=function(a){this.f=a;return this};
q.data=function(a){this.f=a;return this};q.style=function(a){this.u=a;return this};q.className=function(a){this.j=a;return this};q.children=function(a){this.g=a;return this};function u(a,b){a.a|=16;a.g=b;return a}q.value=function(a){this.a|=64;this.g=a;return this};q.checked=function(a){this.a|=128;this.g=a;return this};
function aa(a,b){var d=a.a;0!==(d&1)?a.b=document.createTextNode(a.f):0!==(d&2)?a.b=0===(d&131072)?0===(d&32768)?document.createElement(a.i):document.createElementNS("http://www.w3.org/2000/svg",a.i):a.i.createElement():0===(d&256)&&(b=ba(a.i,b,a.f),a.b=b.element,a.m=b)}
function v(a,b){var d,c,f,g,e=a.a,h;if(0!==(e&10)){h=a.b;if(0===(e&262144)){var k=a.f;if(null!==k)for(g=Object.keys(k),d=0,c=g.length;d<c;d++)f=g[d],h[f]=k[f];if(null!==a.o)for(g=Object.keys(a.o),d=0,c=g.length;d<c;d++)f=g[d],r(h,f,a.o[f]);null!==a.u&&(0===(e&32768)?h.style.cssText=a.u:h.setAttribute("style",a.u));null!==a.j&&(0===(e&32768)?h.className=a.j:h.setAttribute("class",a.j))}else 0===(e&8)?a.i.update(h,void 0,a.f):b.l.i.update(h,void 0,a.f);f=a.g;if(null!==f)if(0===(a.a&192))if("string"===
typeof f)h.textContent=f;else for(d=0,c=f.length;d<c;d++)w(a,f[d],null,b);else 0!==(a.a&64)?a.b.value=a.g:a.b.checked=a.g}else 0!==(e&4)&&(h=a.b,null!==a.j&&(0===(e&32768)?h.className=a.j:h.setAttribute("class",a.j)),x(a.m))}function y(a){if(0===(a.a&4)){if(a=a.g,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)y(a[b])}else z(a.m)}function A(a){if(0===(a.a&4)){if(a=a.g,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)A(a[b])}else a.m.detach()}
function B(a){if(0===(a.a&256))if(0!==(a.a&4)){a=a.m;a.c|=1;null!==a.s&&0===(a.c&65536)&&B(a.s);0!==(a.c&2)&&ca(a);var b=a.l.P;null!==b&&b(a,a.props,a.state)}else{if(null!==a.g&&(a=a.g,"string"!==typeof a))for(b=0;b<a.length;b++)B(a[b])}else A(a)}function w(a,b,d,c){a=a.b;null===b.b?(aa(b,c),a.insertBefore(b.b,d),0!==(b.a&4)&&z(b.m),v(b,c)):(a.insertBefore(b.b,d),y(b),x(b.m,0===(b.a&512)?b.f:null))}
function da(a,b,d,c){a=a.b;null===b.b?(aa(b,c),a.replaceChild(b.b,d.b),0!==(b.a&4)&&z(b.m),v(b,c)):(a.replaceChild(b.b,d.b),y(b),x(b.m,0===(b.a&512)?b.f:null));B(d)}function C(a,b){a.b.removeChild(b.b);B(b)}
function D(a,b,d){var c=a.b,f=a.a,g;b.b=a.b;if(0!==(f&1))a.f!==b.f&&(a.b.nodeValue=b.f);else if(0!==(f&10)){if(0===(f&262144)){if(a.f!==b.f){g=a.f;var e=b.f,h=Object.keys(g),k,n;for(n=0;n<h.length;n++){k=h[n];var l=e[k];g[k]!==l&&(c[k]=l)}}if(a.o!==b.o)if(0===(a.a&32))for(g=a.o,e=b.o,h=Object.keys(g),n=0;n<h.length;n++)k=h[n],l=e[k],g[k]!==l&&r(c,k,l);else if(g=a.o,e=b.o,null!==g)if(null===e)for(k=Object.keys(g),h=0;h<k.length;h++)c.removeAttribute(k[h]);else{k=Object.keys(g);for(h=0;h<k.length;h++)n=
k[h],e.hasOwnProperty(n)?(l=e[n],g[n]!==l&&r(c,n,l)):c.removeAttribute(n);k=Object.keys(e);for(h=0;h<k.length;h++)n=k[h],g.hasOwnProperty(n)||r(c,n,e[n])}else if(null!==e)for(k=Object.keys(e),h=0;h<k.length;h++)n=k[h],r(c,n,e[n]);a.u!==b.u&&(g=null===b.u?"":b.u,0===(f&32768)?c.style.cssText=g:c.setAttribute("style",g));a.j!==b.j&&(g=null===b.j?"":b.j,0===(f&32768)?c.className=g:c.setAttribute("class",g))}else a.f!==b.f&&(0===(f&8)?a.i.update(c,a.f,b.f):d.l.i.update(c,a.f,b.f));if(0===(a.a&192)){if(a.g!==
b.g)if(c=a.g,b=b.g,e=0,h=!1,"string"===typeof c)if(null===b)a.b.removeChild(a.b.firstChild);else if("string"===typeof b)(d=a.b.firstChild)?d.nodeValue=b:a.b.textContent=b;else for(a.b.removeChild(a.b.firstChild);e<b.length;)w(a,b[e++],null,d);else if("string"===typeof b){if(null!==c)for(;e<c.length;)C(a,c[e++]);a.b.textContent=b}else if(null!==c&&0!==c.length)if(null===b||0===b.length)for(;e<c.length;)C(a,c[e++]);else if(1===c.length&&1===b.length)f=c[0],g=b[0],E(f,g)?D(f,g,d):da(a,g,f,d);else if(1===
c.length){f=c[0];if(0===(a.a&16))for(;e<b.length;){g=b[e++];if(E(f,g)){D(f,g,d);h=!0;break}w(a,g,f.b,d)}else for(;e<b.length;){g=b[e++];if(f.h===g.h){D(f,g,d);h=!0;break}w(a,g,f.b,d)}if(h)for(;e<b.length;)w(a,b[e++],null,d);else C(a,f)}else if(1===b.length){g=b[0];if(0===(a.a&16))for(;e<c.length;){f=c[e++];if(E(f,g)){D(f,g,d);h=!0;break}C(a,f)}else for(;e<c.length;){f=c[e++];if(f.h===g.h){D(f,g,d);h=!0;break}C(a,f)}if(h)for(;e<c.length;)C(a,c[e++]);else w(a,g,null,d)}else if(0===(a.a&16)){f=e=0;h=
c.length-1;for(g=b.length-1;e<=h&&f<=g;){k=c[e];n=b[f];if(!E(k,n))break;e++;f++;D(k,n,d)}for(;e<=h&&f<=g;){k=c[h];n=b[g];if(!E(k,n))break;h--;g--;D(k,n,d)}for(;e<=h&&f<=g;)k=c[e++],n=b[f++],E(k,n)?D(k,n,d):da(a,n,k,d);if(e<=h){do C(a,c[e++]);while(e<=h)}else if(f<=g){c=g+1;c=c<b.length?b[c].b:null;do w(a,b[f++],c,d);while(f<=g)}}else{var m=0,f=0,h=c.length-1;k=b.length-1;e=c[m];g=b[f];var l=c[h],p=b[k],G,J;n=0;var H;a:do{for(;e.h===g.h;){D(e,g,d);m++;f++;if(m>h||f>k)break a;e=c[m];g=b[f]}for(;l.h===
p.h;){D(l,p,d);h--;k--;if(m>h||f>k)break a;l=c[h];p=b[k]}if(e.h===p.h){D(e,p,d);e=k+1;e=e<b.length?b[e].b:null;a.b.insertBefore(p.b,e);m++;k--;if(m>h||f>k)break a;e=c[m];p=b[k];continue a}if(l.h===g.h){D(l,g,d);a.b.insertBefore(g.b,e.b);h--;f++;if(m>h||f>k)break a;l=c[h];g=b[f]}}while(0);if(m>h)for(e=k+1,e=e<b.length?b[e].b:null;f<=k;)w(a,b[f++],e,d);else if(f>k)for(;m<=h;)C(a,c[m++]);else{var ha=h-m+1,e=k-f+1;g=Array(e);for(l=0;l<e;l++)g[l]=-1;var X=!1,Y=0;if(4>=e||16>=ha*e)for(G=0,l=m;l<=h;l++){H=
!0;p=c[l];if(G<e)for(m=f;m<=k;m++)if(J=b[m],p.h===J.h){g[m-f]=l;n>m?X=!0:n=m;D(p,J,d);G++;H=!1;break}H&&(C(a,p),Y++)}else{var ia=new Map;G=0;for(l=f;l<=k;l++)p=b[l],ia.set(p.h,l);for(l=m;l<=h;l++)H=!0,p=c[l],G<e&&(m=ia.get(p.h),void 0!==m&&(J=b[m],g[m-f]=l,n>m?X=!0:n=m,D(p,J,d),G++,H=!1)),H&&(C(a,p),Y++)}if(X){h=g.slice(0);c=[];c.push(0);k=0;for(n=g.length;k<n;k++)if(-1!==g[k])if(l=c[c.length-1],g[l]<g[k])h[k]=l,c.push(k);else{l=0;for(m=c.length-1;l<m;)p=(l+m)/2|0,g[c[p]]<g[k]?l=p+1:m=p;g[k]<g[c[l]]&&
(0<l&&(h[k]=c[l-1]),c[l]=k)}l=c.length;for(m=c[l-1];0<l--;)c[l]=m,m=h[m];m=c.length-1;for(l=e-1;0<=l;l--)-1===g[l]?(e=l+f,p=b[e],e+=1,e=e<b.length?b[e].b:null,w(a,p,e,d)):0>m||l!==c[m]?(e=l+f,p=b[e],e+=1,e=e<b.length?b[e].b:null,a.b.insertBefore(p.b,e)):m--}else if(ha-Y!==e)for(l=e-1;0<=l;l--)-1===g[l]&&(e=l+f,p=b[e],e+=1,e=e<b.length?b[e].b:null,w(a,p,e,d))}}else if(null!==b&&0<b.length)for(e=0;e<b.length;e++)w(a,b[e],null,d)}else 0!==(f&64)?c.value!==b.g&&(c.value=b.g):c.checked!==b.g&&(c.checked=
b.g)}else d=b.m=a.m,a.j!==b.j&&(g=null===b.j?"":b.j,0===(f&32768)?c.className=g:c.setAttribute("class",g)),0!==(f&1024)&&a.f===b.f||x(d,0===(f&512)?b.f:void 0)}function E(a,b){return a.a===b.a&&a.i===b.i&&a.h===b.h}function F(){this.A=4;this.a=0;this.i="div";this.P=this.O=this.L=this.F=this.H=this.K=this.U=null}F.prototype.tagName=function(a){this.i=a;return this};F.prototype.canvas=function(){this.A|=65536;this.a|=65536;this.i="canvas";return this};F.prototype.init=function(a){this.F=a;return this};
F.prototype.update=function(a){this.K=a;return this};function I(a,b){return new t(1028,a,void 0===b?null:b)}function ba(a,b,d){var c;c=0===(a.a&131072)?0===(a.a&32768)?document.createElement(a.i):document.createElementNS("http://www.w3.org/2000/svg",a.i):a.i.createElement();b=new K(a.A,a,c,b,d);0!==(a.a&1)&&(c.Z=b);null!==a.H&&(b.state=a.H(b,b.props));null!==a.F&&a.F(b,b.props,b.state);return b}
function K(a,b,d,c,f){this.c=a;this.W=0;this.l=b;this.element=d;this.depth=void 0===c?0:c.depth+1;this.props=void 0===f?null:f;this.state=null;this.s=0===(a&65536)?null:d.getContext("2d");this.J=this.I=null}function L(a){return 0===(a.c&131072)?new t(8,null,null):L(a.l.i)}K.prototype.update=function(a){x(this,a)};function M(a,b){null===a.s?(b.m=a,b.b=a.element,v(b,a)):D(a.s,b,a);a.s=b}function z(a){ea(a);null!==a.s&&0===(a.c&65536)&&y(a.s)}
K.prototype.detach=function(){null!==this.s&&0===(this.c&65536)&&A(this.s);ca(this)};K.prototype.subscribe=function(a){return a.Y(this)};
function x(a,b){var d=a.c;if(void 0!==b&&0===(d&1024)){var c=a.props,f=a.l.U;null!==f?f(a,c,b):0===(a.c&4)&&(a.c|=4,fa(a));a.props=b}if(6===(a.c&6))if(0===(N&8)||0!==(N&32)||0!==(d&256)||0<ga())a.l.K(a,a.props,a.state),a.W=O,a.c&=-133;else if(ja(),b=P,0===(a.c&128)){a.c|=128;d=a.depth;for(b.a|=1;d>=b.w.length;)b.w.push(null);c=b.w[d];null===c?b.w[d]=[a]:c.push(a)}}function ea(a){a.c|=2;var b=a.l.L;null!==b&&b(a,a.props,a.state)}
function ca(a){0!==(a.c&512)&&(ka--,0===ka&&(N&=-9));a.c&=-531;for(var b=a.I;null!==b;)b.M(),b=b.N;a.I=null;fa(a);b=a.l.O;null!==b&&b(a,a.props,a.state)}function fa(a){for(var b=a.J;null!==b;)b.M(),b=b.N;a.J=null}function la(){var a=document.querySelector("#App"),b=ba(ma,void 0,null);a.appendChild(b.element);ea(b);x(b);return b}function Q(){this.a=0;this.w=[];this.v=this.G=this.C=this.D=null}Q.prototype.write=function(a){this.a|=2;null===this.D&&(this.D=[]);this.D.push(a)};
Q.prototype.read=function(a){this.a|=4;null===this.C&&(this.C=[]);this.C.push(a)};Q.prototype.focus=function(a){this.v=a};var N=0,O=0,R=[],na=[],oa=new Q,P=new Q,S=[],pa=[],T=[],qa=null,U=0,ra=document.createTextNode(""),sa="__kivi"+Math.random(),ka=0,V=10,ta=60,W=0,ua=0;(new MutationObserver(va)).observe(ra,{characterData:!0});window.addEventListener("message",wa);
function Z(a){var b=N,d=qa;0===(b&448)?d.state=d.l.X(d,a,d.props,d.state):0!==(b&64)?(b=pa[U++],U===pa.length&&(U=0,N&=-65),b(d,a,Z)):0!==(b&128)?(b=d.l.B[U++],U===d.l.B.length&&(U=0,N&=-129),b(d,a,Z)):0!==(b&256)&&(b=d.B[U++],U===d.B.length&&(N&=-257),b(d,a,Z))}function ja(){0===(N&4)&&(N|=4,requestAnimationFrame(xa))}function wa(a){if(a.source===window&&a.data===sa){N&=-3;a=na;na=[];for(var b=0;b<a.length;b++)a[b]();O++}}
function xa(a){var b,d;N&=-21;0!==(N&8)&&(ya(function(){ta=Math.round((ta+1/((window.performance.now()-a)/1E3))/2);W+=45>ta?-1:1;5<W?(W=0,V+=.1):-5>W&&(W=0,V*=.66);12<V?V=12:2>V&&(V=2)}),ua=a+V);var c=P;P=oa;oa=c;for(d=0;d<S.length;d++)S[d].c|=4;do{for(;0!==(c.a&4);)for(c.a&=-5,b=c.C,c.C=null,d=0;d<b.length;d++)b[d]();for(;0!==(c.a&3);){if(0!==(c.a&1)){c.a&=-2;var f=c.w;for(d=0;d<f.length;d++){var g=f[d];if(null!==g)for(f[d]=null,b=0;b<g.length;b++)x(g[b])}}if(0!==(c.a&2))for(c.a&=-3,b=c.D,c.D=null,
d=0;d<b.length;d++)b[d]()}d=0;for(b=S.length;d<b;)f=S[d++],0===(f.c&16)?(f.c&=-33,d===b?S.pop():S[--d]=S.pop()):x(f)}while(0!==(c.a&7));for(;0!==(c.a&8);)for(c.a&=-9,b=c.G,c.G=null,d=0;d<b.length;d++)b[d]();null!==c.v&&(c.v.constructor===t?c.v.b.focus():c.v.focus(),c.v=null);0<S.length&&ja();O++}
function va(){do{for(;0<R.length;){var a=R;R=[];for(var b=0;b<a.length;b++)a[b]();O++}if(0<T.length)for(a=T,T=[],b=0;b<a.length;b++){for(var d=a[b];0!==(d.a&2);){var c=d.R;d.R=[];d.a&=-3;for(var f=0;f<c.length;f++){var g=c[f];g.a|=4;qa=d;U=0;null!==pa&&(N|=64);null!==d.l.B&&(N|=128);null!==d.B&&(N|=256);Z(g)}}d.a&=-2;O++}}while(0<R.length&&0<T.length);N&=-2}function ya(a){0===(N&2)&&(N|=2,window.postMessage(sa,"*"));na.push(a)}
function ga(){if(0!==(N&16))return 0;var a=ua-performance.now();return 0>=a?(N|=16,0):a}function za(a){new Map;this.V=this.T=this.S=0;this.name=a}za.prototype.create=function(a){return new Aa(this,this.V++,a,this.S,this.T)};function Aa(a,b,d,c,f){this.a=c;this.A=f;this.id=b;this.group=a;this.name=d;new Map}Aa.prototype.create=function(){return new Ba(this,this.A)};function Ba(a,b){this.a=b;this.l=a}(new za("system")).create("actorDisposed");
var Ca=(new F).tagName("td").init(function(a,b){a.element.addEventListener("click",function(a){console.log("Click",b);a.stopPropagation()})}).update(function(a,b){M(a,L(a).className("TableCell").children(b))}),Da=(new F).tagName("tr").update(function(a,b){for(var d=b.props,c="#"+b.id,c=[new t(4,Ca,void 0===c?null:c)],f=0;f<d.length;f++)c.push(I(Ca,d[f]));d=L(a);d.o={"data-id":b.id};M(a,d.className(b.active?"TableRow active":"TableRow").children(c))}),Ea=(new F).tagName("table").update(function(a,
b){M(a,L(a).className("Table").children([u(new t(2,"tbody",null),b.items.map(function(a){return I(Da,a).key(a.id)}))]))}),Fa=(new F).update(function(a,b){var d=b.time,c=L(a).className("AnimBox");c.o={"data-id":""+b.id};M(a,c.style("border-radius:"+d%10+"px;background:rgba(0,0,0,"+(.5+d%10/10)+")"))}),Ga=(new F).update(function(a,b){M(a,u(L(a).className("Anim"),b.items.map(function(a){return I(Fa,a).key(a.id)})))}),Ha=(new F).tagName("li").update(function(a,b){M(a,L(a).className("TreeLeaf").children(""+
b.id))}),Ia=(new F).tagName("ul").update(function(a,b){M(a,u(L(a).className("TreeNode"),b.children.map(function(a){return a.container?I(Ia,a).key(a.id):I(Ha,a).key(a.id)})))}),Ja=(new F).update(function(a,b){M(a,L(a).className("Tree").children([I(Ia,b.root)]))}),ma=(new F).update(function(a,b){var d=b&&b.location,c=null;"table"===d?c=[I(Ea,b.table)]:"anim"===d?c=[I(Ga,b.anim)]:"tree"===d&&(c=[I(Ja,b.tree)]);M(a,L(a).className("Main").children(c))});uibench.init("kivi[simple]","0.10.0");
document.addEventListener("DOMContentLoaded",function(){var a=la();uibench.run(function(b){a.update(b)},function(b){document.body.innerHTML="<pre>"+JSON.stringify(b,null," ")+"</pre>";a=null})});}).call();
