(function(){'use strict';var r;function t(a,b,d){120!==b.charCodeAt(0)?a.setAttribute(b,d):109===b.charCodeAt(1)&&108===b.charCodeAt(2)?a.setAttributeNS("http://www.w3.org/XML/1998/namespace",b,d):108===b.charCodeAt(1)&&105===b.charCodeAt(2)?a.setAttributeNS("http://www.w3.org/1999/xlink",b,d):a.setAttribute(b,d)}function u(a,b,d){this.b=a;this.h=b;this.f=null;this.c=d;this.j=this.a=this.g=this.s=this.v=this.l=null}r=u.prototype;r.key=function(a){this.f=a;return this};r.props=function(a){this.c=a;return this};
r.data=function(a){this.c=a;return this};r.style=function(a){this.v=a;return this};r.className=function(a){this.s=a;return this};r.children=function(a){this.b|=16;this.g=a;return this};function v(a,b){a.b|=48;a.g=b;return a}r.value=function(a){this.b|=128;this.g=a;return this};r.checked=function(a){this.b|=256;this.g=a;return this};function w(a){if(0===(a.b&4)){if(a=a.g,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)w(a[b])}else x(a.j)}
function z(a){if(0===(a.b&4)){if(a=a.g,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)z(a[b])}else a.j.detach()}function A(a){if(0===(a.b&512))if(0!==(a.b&4)){a=a.j;a.i|=1;null!==a.m&&0===(a.i&65536)&&A(a.m);0!==(a.i&2)&&B(a);var b=a.o.J;null!==b&&b(a,a.props,a.state)}else{if(null!==a.g&&(a=a.g,"string"!==typeof a))for(b=0;b<a.length;b++)A(a[b])}else z(a)}
function D(a,b){var d=a.b;0!==(d&1)?a.a=document.createTextNode(a.c):0!==(d&2)?a.a=0===(d&131072)?0===(d&32768)?document.createElement(a.h):document.createElementNS("http://www.w3.org/2000/svg",a.h):a.h.createElement():0===(d&512)&&(b=E(a.h,b,a.c),a.a=b.element,a.j=b)}
function F(a,b){var d,c,f,l,e=a.b,k;if(0!==(e&10)){k=a.a;if(0===(e&262144)){var h=a.c;if(null!==h)for(l=Object.keys(h),d=0,c=l.length;d<c;d++)f=l[d],k[f]=h[f];if(null!==a.l)for(l=Object.keys(a.l),d=0,c=l.length;d<c;d++)f=l[d],t(k,f,a.l[f]);null!==a.v&&(0===(e&32768)?k.style.cssText=a.v:k.setAttribute("style",a.v));null!==a.s&&(0===(e&32768)?k.className=a.s:k.setAttribute("class",a.s))}else 0===(e&8)?a.h.w(k,void 0,a.c):b.o.h.w(k,void 0,a.c);f=a.g;if(null!==f)if(0===(e&4096))if(0===(e&384))if(0===
(e&16))"string"===typeof f?k.textContent=f:G(a,f,null,b);else for(d=0,c=f.length;d<c;d++)G(a,f[d],null,b);else 0!==(a.b&128)?a.a.value=a.g:a.a.checked=a.g;else k.innerHTML=f}else 0!==(e&4)&&H(a.j)}function G(a,b,d,c){a=a.a;null===b.a?(D(b,c),0!==(b.b&4)&&x(b.j),F(b,c),a.insertBefore(b.a,d)):(a.insertBefore(b.a,d),w(b),H(b.j,0===(b.b&1024)?b.c:null))}
function I(a,b,d,c){a=a.a;null===b.a?(D(b,c),0!==(b.b&4)&&x(b.j),F(b,c),a.replaceChild(b.a,d.a)):(a.replaceChild(b.a,d.a),w(b),H(b.j,0===(b.b&1024)?b.c:null));A(d)}function J(a,b){a.a.removeChild(b.a);A(b)}function K(a,b){a.a.textContent="";for(a=0;a<b.length;a++)A(b[a])}
function L(a,b,d){var c=a.a,f=a.b,l;b.a=a.a;if(0!==(f&1))a.c!==b.c&&(a.a.nodeValue=b.c);else if(0!==(f&10)){if(0===(f&262144)){if(a.c!==b.c){l=a.c;var e=b.c,k=Object.keys(l),h,m;for(m=0;m<k.length;m++){h=k[m];var g=e[h];l[h]!==g&&(c[h]=g)}}if(a.l!==b.l)if(0===(a.b&64))for(l=a.l,e=b.l,k=Object.keys(l),m=0;m<k.length;m++)h=k[m],g=e[h],l[h]!==g&&t(c,h,g);else if(l=a.l,e=b.l,null!==l)if(null===e)for(h=Object.keys(l),k=0;k<h.length;k++)c.removeAttribute(h[k]);else{h=Object.keys(l);for(k=0;k<h.length;k++)m=
h[k],e.hasOwnProperty(m)?(g=e[m],l[m]!==g&&t(c,m,g)):c.removeAttribute(m);h=Object.keys(e);for(k=0;k<h.length;k++)m=h[k],l.hasOwnProperty(m)||t(c,m,e[m])}else if(null!==e)for(h=Object.keys(e),k=0;k<h.length;k++)m=h[k],t(c,m,e[m]);a.v!==b.v&&(l=null===b.v?"":b.v,0===(f&32768)?c.style.cssText=l:c.setAttribute("style",l));a.s!==b.s&&(l=null===b.s?"":b.s,0===(f&32768)?c.className=l:c.setAttribute("class",l))}else a.c!==b.c&&(0===(f&8)?a.h.w(c,a.c,b.c):d.o.h.w(c,a.c,b.c));if(0===(a.b&384)){if(a.g!==b.g)if(0===
(a.b&4096))if(c=a.g,b=b.g,0===(a.b&16))null===c?"string"===typeof b?a.a.textContent=b:G(a,b,null,d):null===b?"string"===typeof c?a.a.textContent="":J(a,c):"string"===typeof c?"string"===typeof b?(d=a.a.firstChild)?d.nodeValue=b:a.a.textContent=b:(a.a.textContent="",G(a,b,null,d)):"string"===typeof b?(a.a.textContent=b,A(c)):M(c,b)&&c.f===b.f?L(c,b,d):I(a,b,c,d);else if(null!==c&&0!==c.length)if(null===b||0===b.length)K(a,c);else if(1===c.length&&1===b.length)f=c[0],b=b[0],M(f,b)&&f.f===b.f?L(f,b,
d):I(a,b,f,d);else if(0===(a.b&32)){f=e=0;k=c.length-1;for(l=b.length-1;e<=k&&f<=l;){h=c[e];m=b[f];if(!M(h,m)||h.f!==m.f)break;e++;f++;L(h,m,d)}for(;e<=k&&f<=l;){h=c[k];m=b[l];if(!M(h,m)||h.f!==m.f)break;k--;l--;L(h,m,d)}for(;e<=k&&f<=l;)h=c[e++],m=b[f++],M(h,m)&&h.f===m.f?L(h,m,d):I(a,m,h,d);if(e<=k){do J(a,c[e++]);while(e<=k)}else if(f<=l){c=l+1;c=c<b.length?b[c].a:null;do G(a,b[f++],c,d);while(f<=l)}}else{f=k=0;h=c.length-1;m=b.length-1;e=c[k];l=b[f];var g=c[h],n=b[m],p,y;a:for(;;){for(;e.f===
l.f;){M(e,l)?L(e,l,d):I(a,l,e,d);k++;f++;if(k>h||f>m)break a;e=c[k];l=b[f]}for(;g.f===n.f;){M(g,n)?L(g,n,d):I(a,n,g,d);h--;m--;if(k>h||f>m)break a;g=c[h];n=b[m]}if(g.f===l.f){M(g,l)?L(g,l,d):I(a,l,g,d);a.a.insertBefore(l.a,e.a);h--;f++;if(k>h||f>m)break;g=c[h];l=b[f]}else if(e.f===n.f){M(e,n)?L(e,n,d):I(a,n,e,d);e=m+1;e=e<b.length?b[e].a:null;a.a.insertBefore(n.a,e);k++;m--;if(k>h||f>m)break;e=c[k];n=b[m]}else break}if(k>h)for(e=m+1,e=e<b.length?b[e].a:null;f<=m;)G(a,b[f++],e,d);else if(f>m)for(;k<=
h;)J(a,c[k++]);else{var O=h-k+1,e=m-f+1;l=Array(e);for(g=0;g<e;g++)l[g]=-1;var P=!1,q=0,C=0;if(4>=e||16>=O*e)for(g=k;g<=h;g++){if(p=c[g],C<e)for(n=f;n<=m;n++)if(y=b[n],p.f===y.f){l[n-f]=g;q>n?P=!0:q=n;M(p,y)?L(p,y,d):I(a,y,p,d);C++;c[g]=null;break}}else{for(var W=new Map,g=f;g<=m;g++)p=b[g],W.set(p.f,g);for(g=k;g<=h;g++)p=c[g],C<e&&(n=W.get(p.f),void 0!==n&&(y=b[n],l[n-f]=g,q>n?P=!0:q=n,M(p,y)?L(p,y,d):I(a,y,p,d),C++,c[g]=null))}if(O===c.length&&0===C)for(K(a,c);f<e;)G(a,b[f++],null,d);else{for(g=
O-C;0<g;)p=c[k++],null!==p&&(J(a,p),g--);if(P){k=l.slice(0);c=[];c.push(0);h=0;for(m=l.length;h<m;h++)if(-1!==l[h])if(g=c[c.length-1],l[g]<l[h])k[h]=g,c.push(h);else{g=0;for(n=c.length-1;g<n;)p=(g+n)/2|0,l[c[p]]<l[h]?g=p+1:n=p;l[h]<l[c[g]]&&(0<g&&(k[h]=c[g-1]),c[g]=h)}g=c.length;for(n=c[g-1];0<g--;)c[g]=n,n=k[n];n=c.length-1;for(g=e-1;0<=g;g--)-1===l[g]?(q=g+f,p=b[q],e=q+1,e=e<b.length?b[e].a:null,G(a,p,e,d)):0>n||g!==c[n]?(q=g+f,p=b[q],e=q+1,e=e<b.length?b[e].a:null,a.a.insertBefore(p.a,e)):n--}else if(C!==
e)for(g=e-1;0<=g;g--)-1===l[g]&&(q=g+f,p=b[q],e=q+1,e=e<b.length?b[e].a:null,G(a,p,e,d))}}}else{if(null!==b)for(f=0;f<b.length;f++)G(a,b[f],null,d)}else c.innerHTML=b.g}else 0!==(f&128)?c.value!==b.g&&(c.value=b.g):c.checked!==b.g&&(c.checked=b.g)}else d=b.j=a.j,0!==(f&2048)&&a.c===b.c||H(d,0===(f&1024)?b.c:void 0)}function M(a,b){return a.b===b.b&&a.h===b.h}function N(){this.u=4;this.B=8;this.b=0;this.h="div";this.J=this.I=this.F=this.A=this.w=this.K=null}
N.prototype.tagName=function(a){this.h=a;"string"!==typeof a&&(this.u|=a.u,this.B|=a.u,this.b|=a.u);return this};N.prototype.canvas=function(){this.u|=65536;this.b|=65536;this.h="canvas";return this};N.prototype.init=function(a){this.A=a;return this};N.prototype.update=function(a){this.w=a;return this};function Q(a,b){return new u(2052,a,void 0===b?null:b)}
function E(a,b,d){var c;c=0===(a.b&131072)?0===(a.b&32768)?document.createElement(a.h):document.createElementNS("http://www.w3.org/2000/svg",a.h):a.h.createElement();b=new R(a.u,a,c,b,d);0!==(a.b&1)&&(c.M=b);null!==a.A&&a.A(b,b.props);return b}function R(a,b,d,c,f){this.i=a;this.L=0;this.o=b;this.element=d;this.depth=void 0===c?0:c.depth+1;this.props=void 0===f?null:f;this.state=null;this.m=0===(a&65536)?null:d.getContext("2d");this.D=this.C=null}function S(a){return new u(a.o.B,a.o.h,null)}
R.prototype.update=function(a){H(this,a)};function T(a,b){null===a.m?(b.j=a,b.a=a.element,F(b,a)):L(a.m,b,a);a.m=b}function x(a){U(a);null!==a.m&&0===(a.i&65536)&&w(a.m)}R.prototype.detach=function(){null!==this.m&&0===(this.i&65536)&&z(this.m);B(this)};R.prototype.subscribe=function(a){return a.N(this)};function H(a,b){if(void 0!==b&&0===(a.i&512)){var d=a.props,c=a.o.K;null!==c?c(a,d,b):0===(a.i&4)&&(a.i|=4,V(a));a.props=b}6===(a.i&6)&&(a.o.w(a,a.props,a.state),a.L=X,a.i&=-133)}
function U(a){a.i|=2;var b=a.o.F;null!==b&&b(a,a.props,a.state)}function B(a){a.i&=-19;for(var b=a.C;null!==b;)b.G(),b=b.H;a.C=null;V(a);b=a.o.I;null!==b&&b(a,a.props,a.state)}function V(a){for(var b=a.D;null!==b;)b.G(),b=b.H;a.D=null}function aa(){var a=document.querySelector("#App"),b=E(ba,void 0,null);a.appendChild(b.element);U(b);H(b);return b}var X=0,Y=[],Z=[],ca=document.createTextNode(""),da="__kivi"+Math.random();(new MutationObserver(ea)).observe(ca,{characterData:!0});
window.addEventListener("message",fa);function fa(a){if(a.source===window&&a.data===da){a=Z;Z=[];for(var b=0;b<a.length;b++)a[b]();X++}}function ea(){for(;0<Y.length;){var a=Y;Y=[];for(var b=0;b<a.length;b++)a[b]();X++}}
var ga=(new N).tagName("td").init(function(a,b){a.element.addEventListener("click",function(a){console.log("Click",b);a.stopPropagation()})}).update(function(a,b){var d=S(a).className("TableCell");d.g=b;T(a,d)}),ha=(new N).tagName("tr").update(function(a,b){for(var d=b.props,c="#"+b.id,c=[new u(4,ga,void 0===c?null:c)],f=0;f<d.length;f++)c.push(Q(ga,d[f]));d=S(a);d.l={"data-id":b.id};T(a,d.className(b.active?"TableRow active":"TableRow").children(c))}),ia=(new N).tagName("table").update(function(a,
b){T(a,S(a).className("Table").children([v(new u(2,"tbody",null),b.items.map(function(a){return Q(ha,a).key(a.id)}))]))}),ja=(new N).update(function(a,b){var d=b.time,c=S(a).className("AnimBox");c.l={"data-id":""+b.id};T(a,c.style("border-radius:"+d%10+"px;background:rgba(0,0,0,"+(.5+d%10/10)+")"))}),ka=(new N).update(function(a,b){T(a,v(S(a).className("Anim"),b.items.map(function(a){return Q(ja,a).key(a.id)})))}),la=(new N).tagName("li").update(function(a,b){var d=S(a).className("TreeLeaf");d.g=
""+b.id;T(a,d)}),ma=(new N).tagName("ul").update(function(a,b){T(a,v(S(a).className("TreeNode"),b.children.map(function(a){return a.container?Q(ma,a).key(a.id):Q(la,a).key(a.id)})))}),na=(new N).update(function(a,b){T(a,S(a).className("Tree").children([Q(ma,b.root)]))}),ba=(new N).update(function(a,b){var d=b&&b.location,c=null;"table"===d?c=[Q(ia,b.table)]:"anim"===d?c=[Q(ka,b.anim)]:"tree"===d&&(c=[Q(na,b.tree)]);T(a,S(a).className("Main").children(c))});uibench.init("kivi[simple]","1.0.0");
document.addEventListener("DOMContentLoaded",function(){var a=aa();uibench.run(function(b){a.update(b)},function(b){document.body.innerHTML="<pre>"+JSON.stringify(b,null," ")+"</pre>";a=null})});}).call();
